<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>로그인</title>
	<style>
		/* 전체 레이아웃 및 폰트 */
		body {
			font-family: 'Malgun Gothic', '맑은 고딕', Arial, sans-serif;
			max-width: 400px;
			margin: 50px auto;
			padding: 0 20px;
			background-color: #f4f4f9;
		}
		h1 { text-align: center; color: #333; margin-bottom: 30px; }
		
		/* 공통 컨테이너 스타일 */
		.login-section {
			background: white;
			border: 1px solid #e0e0e0;
			padding: 25px;
			margin-bottom: 25px;
			border-radius: 10px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
		}
		
		/* 입력 필드 스타일 */
		input[type="text"], input[type="password"] {
			display: block;
			width: 90%;
			margin: 10px auto;
			padding: 12px;
			border: 1px solid #ccc;
			border-radius: 5px;
			font-size: 14px;
		}
		
		/* 버튼 공통 스타일 */
		button {
			display: block;
			width: 95%;
			margin: 15px auto 5px;
			padding: 12px;
			border: none;
			border-radius: 5px;
			font-size: 15px;
			font-weight: bold;
			cursor: pointer;
			transition: background-color 0.3s;
		}
		
		/* 일반 로그인 버튼 */
		#login-button {
			background: #5C6BC0; /* 인디고 계열 */
			color: white;
		}
		#login-button:hover {
			background: #4754a3;
		}
		
		/* 소셜 로그인 구분선 */
		.oauth-login p {
			text-align: center;
			color: #777;
			margin: 15px 0;
		}
		.oauth-login a {
			text-decoration: none; /* 링크 밑줄 제거 */
			display: block;
		}
		
		/* 소셜 버튼 스타일 */
		.google { background: #DB4437; color: white; }
		.naver { background: #03C75A; color: white; }
		.kakao { background: #FEE500; color: #3C1E1E; }
		
		.google:hover { background: #c2372c; }
		.naver:hover { background: #02b351; }
		.kakao:hover { background: #e0cc00; }
		
		/* 메시지 스타일 */
		#register-message {
			text-align: center;
			padding-top: 10px;
			font-weight: bold;
		}
		.error { color: #D32F2F; font-size: 13px; }
		.success { color: #388E3C; font-size: 13px; }
	</style>
</head>
<body>

<h1>로그인</h1>

<form id="login-form" class="login-section" action="/api/auth/login" method="POST">
	<input type="text" name="loginId" placeholder="아이디">
	<input type="password" name="password" placeholder="비밀번호">
	<button type="submit" id="login-button">로그인</button>
</form>

<div class="login-section oauth-login">
	<p>또는 소셜 계정으로 로그인</p>
	<a href="http://ec2-3-39-81-234.ap-northeast-2.compute.amazonaws.com:8080/oauth2/authorization/google">
		<button type="button" class="google">Google 로그인</button>
	</a>
	<a href="/oauth2/authorization/naver">
		<button type="button" class="naver">Naver 로그인</button>
	</a>
	<a href="/oauth2/authorization/kakao">
		<button type="button" class="kakao">Kakao 로그인</button>
	</a>
</div>

<form id="register-form" class="login-section register-form">
	<h3 style="text-align: center; margin-top: 0; color: #5C6BC0;">회원가입</h3>
	<input type="text" name="loginId" placeholder="새 아이디" required>
	<input type="password" name="password" placeholder="새 비밀번호" required>
	<button type="submit" style="background: #26A69A; color: white;">회원가입</button>
	<p id="register-message"></p>
</form>

<script>
	
	// 회원가입 (Fetch API 사용 유지)
	document.getElementById("register-form").addEventListener("submit", async function(e) {
		e.preventDefault();
		const loginId = e.target.loginId.value;
		const password = e.target.password.value;
		const messageBox = document.getElementById("register-message");
		messageBox.textContent = "";
		
		try {
			const response = await fetch("/api/auth/register", {
				method: "POST",
				headers: { "Content-Type": "application/json" },
				body: JSON.stringify({ loginId, password })
			});
			
			if (response.ok) {
				messageBox.textContent = "회원가입 성공! 이제 로그인하세요.";
				messageBox.className = "success";
				e.target.reset(); // 입력 필드 초기화
			} else {
				const err = await response.json().catch(() => ({})); // JSON 파싱 실패 대비
				messageBox.textContent = "회원가입 실패: " + (err.message || `상태 코드 ${response.status}`);
				messageBox.className = "error";
			}
		} catch (err) {
			console.error('Registration Error:', err);
			messageBox.textContent = "회원가입 요청 중 네트워크 오류가 발생했습니다.";
			messageBox.className = "error";
		}
	});
</script>
</body>
</html>